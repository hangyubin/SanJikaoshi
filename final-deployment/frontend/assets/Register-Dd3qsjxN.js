import{d as y,r as g,a as f,b as h,e as c,f as r,w as s,g as u,h as N,l as w,m as _,i as R,_ as U}from"./index-DxJQWBil.js";import{s as P}from"./axios-B6YHU1xq.js";const k={class:"register-container"},q={class:"register-box"},C=y({__name:"Register",setup(F){const m=R(),d=g(),i=g(!1),l=f({username:"",password:"",confirmPassword:"",realName:"",email:"",phone:""}),b=f({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(n,e,a)=>{e!==l.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的手机号",trigger:"blur"}]}),V=async()=>{if(d.value)try{await d.value.validate(),i.value=!0;const{confirmPassword:n,...e}=l;await P.post("/api/auth/register",e),i.value=!1,_.success("注册成功"),m.push("/login")}catch(n){i.value=!1,console.error("注册失败:",n),_.error(n.response?.data||"注册失败，请稍后重试")}},x=()=>{m.push("/login")};return(n,e)=>{const a=u("el-input"),t=u("el-form-item"),p=u("el-button"),v=u("el-form");return N(),h("div",k,[c("div",q,[e[8]||(e[8]=c("h2",{class:"register-title"},"医疗卫生系统三基考试培训 - 注册",-1)),r(v,{model:l,rules:b,ref_key:"registerFormRef",ref:d,"label-width":"80px",class:"register-form"},{default:s(()=>[r(t,{label:"用户名",prop:"username"},{default:s(()=>[r(a,{modelValue:l.username,"onUpdate:modelValue":e[0]||(e[0]=o=>l.username=o),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),r(t,{label:"密码",prop:"password"},{default:s(()=>[r(a,{modelValue:l.password,"onUpdate:modelValue":e[1]||(e[1]=o=>l.password=o),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{label:"确认密码",prop:"confirmPassword"},{default:s(()=>[r(a,{modelValue:l.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>l.confirmPassword=o),type:"password",placeholder:"请确认密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{label:"真实姓名",prop:"realName"},{default:s(()=>[r(a,{modelValue:l.realName,"onUpdate:modelValue":e[3]||(e[3]=o=>l.realName=o),placeholder:"请输入真实姓名","prefix-icon":"UserFilled"},null,8,["modelValue"])]),_:1}),r(t,{label:"邮箱",prop:"email"},{default:s(()=>[r(a,{modelValue:l.email,"onUpdate:modelValue":e[4]||(e[4]=o=>l.email=o),type:"email",placeholder:"请输入邮箱","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),r(t,{label:"手机号",prop:"phone"},{default:s(()=>[r(a,{modelValue:l.phone,"onUpdate:modelValue":e[5]||(e[5]=o=>l.phone=o),placeholder:"请输入手机号","prefix-icon":"Phone"},null,8,["modelValue"])]),_:1}),r(t,null,{default:s(()=>[r(p,{type:"primary",class:"register-btn",onClick:V,loading:i.value},{default:s(()=>[...e[6]||(e[6]=[w(" 注册 ",-1)])]),_:1},8,["loading"]),r(p,{type:"default",class:"login-btn",onClick:x},{default:s(()=>[...e[7]||(e[7]=[w(" 已有账号？去登录 ",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}}),L=U(C,[["__scopeId","data-v-34792341"]]);export{L as default};
