# 智能考试系统 - 宝塔面板部署指南（简化版）

## 一、系统架构

智能考试系统采用前后端分离架构：
- **前端**：静态资源，部署在Nginx上
- **后端**：Java应用，部署在Java环境中
- **数据库**：MySQL

## 二、环境准备

### 1. 安装宝塔面板

```bash
# CentOS系统
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh

# Ubuntu/Debian系统
wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh
```

### 2. 安装必要软件

登录宝塔面板，在「软件商店」中安装：
- Nginx 1.20+
- MySQL 5.7+
- Java 8
- Maven 3.6+（可选，用于构建）

## 三、快速部署

### 1. 上传项目文件

#### （1）后端部署

1. **上传后端jar包**
   - 在 `/www/wwwroot` 创建 `smart-exam-backend` 文件夹
   - 上传 `backend-0.0.1-SNAPSHOT.jar` 到该文件夹

2. **添加Java项目**
   - 进入「Java项目」
   - 点击「添加项目」
   - 填写：
     - 项目名称：smart-exam-backend
     - 项目路径：/www/wwwroot/smart-exam-backend
     - 运行jar包：/www/wwwroot/smart-exam-backend/backend-0.0.1-SNAPSHOT.jar
     - Java版本：Java 8
     - 端口：8080
   - 点击「提交」
   - 点击「启动」

#### （2）前端部署

1. **上传前端文件**
   - 在 `/www/wwwroot` 创建 `smart-exam-frontend` 文件夹
   - 上传前端构建后的 `dist` 目录下所有文件

2. **添加网站**
   - 进入「网站」
   - 点击「添加站点」
   - 填写：
     - 域名：你的域名或IP
     - 根目录：/www/wwwroot/smart-exam-frontend
     - PHP版本：纯静态
   - 点击「提交」

3. **配置反向代理**
   - 进入网站详情页 → 「反向代理」
   - 点击「添加反向代理」
   - 填写：
     - 代理名称：api
     - 目标URL：http://127.0.0.1:8080
     - 代理目录：/api
   - 点击「提交」

### 2. 数据库配置

1. **创建数据库**
   - 进入「数据库」
   - 点击「添加数据库」
   - 填写：
     - 数据库名：smart_exam
     - 用户名：smart_exam_user
     - 密码：设置强密码
     - 字符集：utf8mb4
   - 点击「提交」

2. **修改数据库配置**
   - 在后端文件夹中创建 `application.properties`
   - 添加：
     ```properties
     spring.datasource.url=jdbc:mysql://localhost:3306/smart_exam?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
     spring.datasource.username=smart_exam_user
     spring.datasource.password=你的数据库密码
     ```

## 四、启动系统

1. 确保后端服务状态为「运行中」
2. 确保Nginx服务正常运行
3. 浏览器访问：`http://你的域名或IP`

## 五、登录系统

- **用户名**：admin
- **密码**：admin123

## 六、核心部署步骤总结

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 安装宝塔面板 | 一键安装脚本 |
| 2 | 安装软件 | Nginx、MySQL、Java |
| 3 | 上传后端jar包 | 部署Java项目 |
| 4 | 上传前端文件 | 部署静态资源 |
| 5 | 配置反向代理 | 连接前后端 |
| 6 | 创建数据库 | 初始化数据 |
| 7 | 启动服务 | 访问系统 |

## 七、常见问题

### 1. 502错误
- 检查后端服务是否运行
- 检查反向代理配置

### 2. 数据库连接失败
- 检查数据库密码是否正确
- 检查数据库服务是否运行

### 3. 登录失败
- 确保后端服务正常
- 检查管理员账号是否已初始化

## 八、简化部署要点

1. **使用预构建包**：直接使用已构建好的jar包和前端文件，避免在服务器上构建
2. **默认配置**：使用默认端口和配置，减少修改
3. **快速启动**：优先确保系统能运行，再进行优化
4. **逐步完善**：先部署核心功能，再添加SSL、备份等高级配置

## 九、后续优化（可选）

- 配置SSL证书，启用HTTPS
- 设置数据库自动备份
- 优化Nginx和MySQL参数
- 配置防火墙，只开放必要端口

---

**文档更新时间**：2025-12-07
**适用系统版本**：智能考试系统 v1.0